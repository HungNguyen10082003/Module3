<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Hoạt hình trực tuyến — MyToon</title>
    <style>
      :root {
        --accent: #2a6;
        --muted: #666;
        --gap: 16px;
        --card-bg: #fff;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
        margin: 0;
        background: #f5f7fb;
        color: #111;
      }
      .wrap {
        max-width: 1100px;
        margin: 0 auto;
        padding: 20px;
      }
      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 16px;
      }
      .brand {
        font-weight: 700;
        color: var(--accent);
        font-size: 1.2rem;
      }
      .controls {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .search {
        padding: 8px 10px;
        border-radius: 8px;
        border: 1px solid #ddd;
        width: 220px;
      }
      .filters {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .filter {
        background: #fff;
        border: 1px solid #e6e9ef;
        padding: 6px 10px;
        border-radius: 999px;
        cursor: pointer;
      }
      .filter.active {
        background: var(--accent);
        color: #fff;
        border-color: var(--accent);
      }

      .hero {
        background: linear-gradient(90deg, #f0fff0, #fff);
        padding: 16px;
        border-radius: 10px;
        margin-bottom: 16px;
      }
      .layout {
        display: grid;
        grid-template-columns: 1fr 320px;
        gap: 16px;
      }
      main {
        background: var(--card-bg);
        padding: 14px;
        border-radius: 10px;
      }
      aside {
        background: var(--card-bg);
        padding: 14px;
        border-radius: 10px;
      }
      .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 12px;
      }
      .card {
        background: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.05);
        cursor: pointer;
        display: flex;
        flex-direction: column;
      }
      .card img {
        width: 100%;
        height: 150px;
        object-fit: cover;
        display: block;
      }
      .meta {
        padding: 10px;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .title {
        font-weight: 600;
        font-size: 0.98rem;
      }
      .sub {
        color: var(--muted);
        font-size: 0.9rem;
      }

      footer {
        text-align: center;
        color: var(--muted);
        margin-top: 12px;
      }

      .modal {
        position: fixed;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.6);
        padding: 20px;
        z-index: 60;
        visibility: hidden;
        opacity: 0;
        transition: opacity 0.18s;
      }
      .modal.show {
        visibility: visible;
        opacity: 1;
      }
      .player {
        max-width: 960px;
        width: 100%;
        background: #000;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 8px 40px rgba(0, 0, 0, 0.5);
      }
      .player video {
        width: 100%;
        height: auto;
        display: block;
        background: #000;
      }
      .player .info {
        padding: 10px;
        background: #fff;
        color: #111;
      }
      .close {
        position: absolute;
        top: 14px;
        right: 20px;
        background: transparent;
        border: 0;
        color: #fff;
        font-size: 22px;
        cursor: pointer;
      }

      @media (max-width: 900px) {
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
        .layout {
          grid-template-columns: 1fr 260px;
        }
      }
      @media (max-width: 700px) {
        header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
        }
        .layout {
          grid-template-columns: 1fr;
        }
        .grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }
      @media (max-width: 420px) {
        .grid {
          grid-template-columns: 1fr;
        }
        .search {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">MyToon</div>
        <div class="controls">
          <input id="search" class="search" placeholder="Tìm theo tiêu đề..." />
          <div id="filters" class="filters" aria-hidden="false">
            <button class="filter active" data-cat="all">Tất cả</button>
            <button class="filter" data-cat="action">Hành động</button>
            <button class="filter" data-cat="comedy">Hài</button>
            <button class="filter" data-cat="kids">Trẻ em</button>
          </div>
        </div>
      </header>

      <section class="hero" aria-label="Giới thiệu">
        <h1 style="margin: 0">Xem hoạt hình trực tuyến</h1>
        <p style="margin: 6px 0 0; color: #555">
          Chọn tập và xem trực tiếp. Thêm video vào thư mục "videos/" hoặc dùng
          URL trực tuyến.
        </p>
      </section>

      <div class="layout">
        <main aria-live="polite">
          <h2 style="margin-top: 0">Danh sách hoạt hình</h2>
          <div id="grid" class="grid" role="list"></div>
        </main>

        <aside>
          <h3>Phổ biến</h3>
          <ul style="padding-left: 18px; color: var(--muted); margin-top: 8px">
            <li>Loạt A</li>
            <li>Loạt B</li>
            <li>Loạt C</li>
          </ul>
        </aside>
      </div>

      <footer>© 2025 — MyToon</footer>
    </div>

    <div
      id="modal"
      class="modal"
      role="dialog"
      aria-modal="true"
      aria-hidden="true"
    >
      <button class="close" aria-label="Đóng" id="closeBtn">✕</button>
      <div class="player" role="document">
        <video
          id="player"
          controls
          preload="metadata"
          poster=""
          crossorigin="anonymous"
        >
          <source id="videoSrc" src="" type="video/mp4" />
          Trình duyệt không hỗ trợ thẻ video.
        </video>
        <div class="info">
          <strong id="playerTitle"></strong>
          <p id="playerDesc" style="margin: 6px 0 0; color: var(--muted)"></p>
        </div>
      </div>
    </div>

    <script>
      const catalog = [
        {
          id: 1,
          title: "Ninja Bé Tốc Độ",
          cat: "action",
          src: "videos/cartoon1.mp4",
          poster: "images/p1.jpg",
          desc: "Tập thú vị cho trẻ em.",
        },
        {
          id: 2,
          title: "Phiêu Lưu Vui Nhộn",
          cat: "comedy",
          src: "videos/cartoon2.mp4",
          poster: "images/p2.jpg",
          desc: "Hài hước, nhẹ nhàng.",
        },
        {
          id: 3,
          title: "Bạn Bè Kỳ Diệu",
          cat: "kids",
          src: "videos/cartoon3.mp4",
          poster: "images/p3.jpg",
          desc: "Dành cho trẻ nhỏ.",
        },
        {
          id: 4,
          title: "Siêu Anh Hùng",
          cat: "action",
          src: "videos/cartoon4.mp4",
          poster: "images/p4.jpg",
          desc: "Hành động tốc độ.",
        },
        {
          id: 5,
          title: "Gia Đình Hài",
          cat: "comedy",
          src: "videos/cartoon5.mp4",
          poster: "images/p5.jpg",
          desc: "Cười thả ga.",
        },
        {
          id: 6,
          title: "Khu Rừng Thần Tiên",
          cat: "kids",
          src: "videos/cartoon6.mp4",
          poster: "images/p6.jpg",
          desc: "Cổ tích cho thiếu nhi.",
        },
      ];

      const grid = document.getElementById("grid");
      const search = document.getElementById("search");
      const filters = document.getElementById("filters");
      const modal = document.getElementById("modal");
      const player = document.getElementById("player");
      const videoSrc = document.getElementById("videoSrc");
      const playerTitle = document.getElementById("playerTitle");
      const playerDesc = document.getElementById("playerDesc");
      const closeBtn = document.getElementById("closeBtn");

      function render(list) {
        grid.innerHTML = "";
        if (!list.length) {
          grid.innerHTML =
            '<p style="color:var(--muted)">Không tìm thấy kết quả.</p>';
          return;
        }
        list.forEach((item) => {
          const el = document.createElement("article");
          el.className = "card";
          el.setAttribute("role", "listitem");
          el.innerHTML = `
          <img loading="lazy" src="${item.poster}" alt="${item.title} poster" />
          <div class="meta">
            <div class="title">${item.title}</div>
            <div class="sub">${item.desc}</div>
          </div>`;
          el.addEventListener("click", () => openPlayer(item));
          grid.appendChild(el);
        });
      }

      function openPlayer(item) {
        videoSrc.src = item.src;
        player.pause();
        player.load();
        player.poster = item.poster || "";
        playerTitle.textContent = item.title;
        playerDesc.textContent = item.desc;
        modal.classList.add("show");
        modal.setAttribute("aria-hidden", "false");

        player.play().catch(() => {});
      }

      function closePlayer() {
        modal.classList.remove("show");
        modal.setAttribute("aria-hidden", "true");
        player.pause();
        player.currentTime = 0;
        videoSrc.src = "";
        player.load();
      }

      let activeCat = "all";
      function applyFilters() {
        const q = search.value.trim().toLowerCase();
        let out = catalog.filter(
          (i) =>
            (activeCat === "all" || i.cat === activeCat) &&
            (i.title.toLowerCase().includes(q) ||
              i.desc.toLowerCase().includes(q))
        );
        render(out);
      }

      render(catalog);

      search.addEventListener("input", applyFilters);
      filters.addEventListener("click", (e) => {
        const btn = e.target.closest(".filter");
        if (!btn) return;
        [...filters.querySelectorAll(".filter")].forEach((b) =>
          b.classList.remove("active")
        );
        btn.classList.add("active");
        activeCat = btn.dataset.cat;
        applyFilters();
      });

      closeBtn.addEventListener("click", closePlayer);
      modal.addEventListener("click", (e) => {
        if (e.target === modal) closePlayer();
      });
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closePlayer();
      });
    </script>
  </body>
</html>
